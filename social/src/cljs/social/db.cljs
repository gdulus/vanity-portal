(ns social.db
    (:require [alandipert.storage-atom :refer [local-storage]]))

;; ----------------------------------------------------------------------------------------------

(def storage (local-storage (atom {}) :token))

(def default-db {})

;; ----------------------------------------------------------------------------------------------
;; USER
;; ----------------------------------------------------------------------------------------------

(defn get-user-status
    [db]
    (let [user (:user db)
          token (:token @storage)]
        (if (or (nil? user) (nil? token))
            :not-logged-in
            (if (get user "firstLogin")
                :first-time-logged-in
                :logged-in))))

;; ----------------------------------------------------------------------------------------------
;; LOADER
;; ----------------------------------------------------------------------------------------------



;; ----------------------------------------------------------------------------------------------
;; FORM
;; ----------------------------------------------------------------------------------------------